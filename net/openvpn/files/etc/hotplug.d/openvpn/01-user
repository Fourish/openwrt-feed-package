#!/bin/sh

. /lib/functions/openvpn.sh

[ -e "/etc/openvpn.user" ] && {
	env -i ACTION="$ACTION" INSTANCE="$INSTANCE" \
		/bin/sh \
		/etc/openvpn.user \
		$*
}

# Wrap user defined scripts on up/down events
case "$ACTION" in
	up|down)
		if command=$(uci get "openvpn.${INSTANCE}.${ACTION}"); then
			shift
			exec /bin/sh -c "$command $*"
		fi
	;;
esac

exit 0
